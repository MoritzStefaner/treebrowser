<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

	<head>

		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>--TITLE goes here--</title>
				
		<script type="text/javascript" src="lib/swfobject/swfobject.js"></script>
		
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>

		<script type="text/javascript">
			// FLASH EMBEDDING
	
			var URL="semanticsearch.swf";
			var flashID = "flash";			
			var width = "733";
			var height = "400";
			var flashVersion = "10.0.0";
			var expressInstallURL = "lib/swfobject/expressInstall.swf";			
		
			var flashvars = {
			
				// server URL for service calls with trailing slash
				baseURL: "http://oe.dynalias.net/", 
				//baseURL: "http://portal.organic-edunet.eu/", 

				// called when user makes a selection the visualization	
				JSCallBack_selectionChange:"onSelectionChange",
				
				// called when a new search point is available
				JSCallBack_searchPointUpdate:"onSearchPointUpdate"
			};
		
			var params = {
			
			};
			var attributes = {
			
			};

			$(document).ready(function() {
    			swfobject.embedSWF(URL, flashID, width, height, flashVersion, expressInstallURL, flashvars, params, attributes);	
				$("#changeSelectionTest").click(function(){
    				getFlashMovie("flash").changeSelection("http://www.cc.uah.es/ie/ont/OE-OAAE#Policy");
    			})
		  	});

			// getFlashID for JS - Flash communication
			// ----------------------------------------------
			
			// from http://kb.adobe.com/selfservice/viewContent.do?externalId=tn_15683&sliceId=1
			function getFlashMovie(movieName) {
			  var isIE = navigator.appName.indexOf("Microsoft") != -1;
			  return (isIE) ? window[movieName] : document[movieName];
			}

			// FLASH TO JS CALLBACKS
		
			// called when selection in visualization changes
			// flash passes an array of data objects for the (currently 0-1) selected nodes
			// [{label:"localized label", id:"identifier"}]
			// open: should flash also manage the search points, or will we do this here?
		 
			function onSelectionChange(selectedNodes){
				if(console) console.log("JS: onSelectionChange", selectedNodes);
				$("#selectionInfo").html("selected: "+selectedNodes[0].id);
			}
			
			function onSearchPointUpdate(){
				if(console) console.log("JS: onSearchPointUpdate");
			}
			
		  	
		</script>
	</head>
	
	<body style="margin:0; padding:10px; background:#EEEEEE;">
		<div id="flash">
			<a href="http://www.adobe.com/go/getflashplayer">
				<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
			</a>
		</div>
		<div style="color:#999999; padding:10px;" id="selectionInfo"></div>
		<a href="#" id="changeSelectionTest">Change Selection</a>
	</body>
	
</html>